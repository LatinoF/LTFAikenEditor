<!DOCTYPE html><html><head>
    <title>LTF Aiken Editor</title>
    <meta charset="utf-8">
    <link rel="icon" type="image/png" sizes="16x16" href="https://img.icons8.com/?size=16&id=7LhMaNDFgoYK&format=png">
    <link rel="icon" type="image/png" sizes="32x32" href="https://img.icons8.com/?size=32&id=7LhMaNDFgoYK&format=png">
    <link rel="icon" type="image/png" sizes="48x48" href="https://img.icons8.com/?size=48&id=7LhMaNDFgoYK&format=png">
    <link href="https://fonts.googleapis.com/css2?family=Nunito:wght@400&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="css/docs.css">
    <link rel="stylesheet" href="css/codemirror.css">
    <link rel="stylesheet" href="css/lint.css">
    <link rel="stylesheet" href="css/jquery-ui.css">
    <script src="js/codemirror.js"></script>
    <script src="js/simple.js"></script>
    <script src="js/lint.js"></script>
    <script src="js/aiken-hint.js"></script>
    <script src="js/aiken-codemirror-mode.js"></script>
    <script src="js/aiken-codemirror-addon.js"></script>
    <script src="js/aiken-lint.js"></script>
    <script src="js/gift-hint.js"></script>
    <script src="js/gift-codemirror-mode.js"></script>
    <script src="js/jquery-i18next.min.js"></script>
    <script src="js/i18next.js"></script>
    <script src="js/i18nextBrowserLanguageDetector.js"></script>
    <script src="js/jquery.js"></script>
    <script src="js/jquery-ui.min.js"></script>
    <script src="js/translations.js"></script>
    
    <style>
        .CodeMirror {border: 1px solid silver; margin-bottom: 1em; height: calc(100% - 40px)}
        dt { text-indent: -2em; padding-left: 2em; margin-top: 1em; }
        dd { margin-left: 1.5em; margin-bottom: 1em; }
        dt {margin-top: 1em;}
        html {font-size: 18px}
        #nav ul li {margin-right:7px}
        #nav ul li a{padding-right:0px}
        #nav ul li.header {font-weight:bold}
        @media screen and (min-width: 1000px) {
            #nav {
                border-right: 450px solid transparent;
            }
        }
    
        article{
            max-width: 900px;
            padding: 30px 50px 30px 50px;
        }
    
    </style>
    </head>
    <body>
    <div id="nav">
        <ul class="options">
            <li class="header" data-i18n="menu.options"></li>
            <li id="mode-aiken-gift" style="display:block">
                <label for="mode" data-i18n="menu.mode.label"></label>
                <select id="mode" onchange="changeMode()">
                    <option value="aiken" data-i18n="menu.mode.aiken"></option>
                    <option value="gift" data-i18n="menu.mode.gift"></option>
                </select>
            </li>
            <li>
                <input type="checkbox" id="autocomplete" checked="checked" onchange="autocompleteChanged()">
                <label for="autocomplete" data-i18n="menu.autocomplete"></label>
            </li>
            <li>
                <button onclick="saveTofile()" data-i18n="menu.save-to-file"></button>
            </li>
        </ul>
    </div>
    
    <article>
        <div id="code"></div>
        <div id="aikenexample" style="display:none">Qual è la risposta corretta a questa domanda?
A. È questa?
B. Forse questa risposta?
C. Possibilmente questa?
D. Deve essere questa!
ANSWER: D

Quanto fa 2+2?
A. 4
B. 5
C. 2
D. 1969
ANSWER: A</div>
    </article>
    
    <div style="position:absolute;bottom:0;left:4px;z-index:2;font-size:12px">Mah Davveroh?</div>
    
    <script>
        i18next
                .use(i18nextBrowserLanguageDetector)
                .init({
                    fallbackLng: "en",
                    keySeparator: false,
                    resources: res
                }, function (err, t) {
                    jqueryI18next.init(i18next, $);
                    $('body').localize();
                });

        var sc = document.getElementById("aikenexample");
        var code = document.getElementById("code");
        var editor = CodeMirror(code, {
            value: (sc.textContent || sc.innerText || sc.innerHTML),
            mode: "aiken",
            lint: true,
            lineNumbers: true,
            lineWrapping: true,
            gutters: ["CodeMirror-lint-markers"],
            aikenAutocomplete: document.getElementById("autocomplete").checked
        });

        function autocompleteChanged() {
            editor.setOption("aikenAutocomplete", document.getElementById("autocomplete").checked);
        }

        function saveTofile() {
            let textToWrite = editor.getValue().replace(/\n/g, "\r\n").trim();
            let blob = new Blob([textToWrite], {type: 'text/plain'});
            let d = new Date();
            let mode = getMode().toUpperCase();
            let fileName = d.getFullYear() + "." + String(d.getMonth() + 1).padStart(2, "0") + "." + String(d.getDate()).padStart(2, "0") + " - DB " + mode + ".txt";
    
            if (window.navigator.msSaveOrOpenBlob) {
                window.navigator.msSaveOrOpenBlob(blob, fileName);
            } else {
                var a = document.createElement("a");
                a.href = URL.createObjectURL(blob);
                a.download = fileName;
                a.style.display = 'none';
                document.body.appendChild(a);
                a.click();
                setTimeout(function () {
                    document.body.removeChild(a);
                    window.URL.revokeObjectURL(a);
                }, 0);
            }
        }
    
        function getMode() {
            return document.getElementById("mode").value;
        }
    
        function changeMode() {
            var mode = getMode();
            editor.setOption("mode", mode);
        }
    
    </script>
    </body></html>